extends main_layout_run
block content
  script.
    function toggle(source,_id) {
      let all_checkboxes = document.getElementsByClassName('checkbox-input');
      let checkboxes = [];
      for (let i=0;i<all_checkboxes.length;i++){
        console.log(all_checkboxes[i].id);
        if (all_checkboxes[i].id == _id) {
            checkboxes.push(all_checkboxes[i]);
          }
      }
      for (let i=0;i<checkboxes.length;i++) {
        checkboxes[i].checked = source.checked;
      }
    }
  table.table.table-striped
    thead
      tr
        th.text-center 
          H4 Isolate
        th.text-center
          H4 FastQC
          input.checkbox-input(type="checkbox",name='fastqc_check_all',onClick="toggle(this,'fastqc')") 
        th.text-center
          H4 Kraken 
          input.checkbox-input(type="checkbox",name='kraken_check_all',onClick="toggle(this,'kraken')")
        th.text-center
          H4 Sal Serotyping
          input.checkbox-input(type="checkbox",name='typing_check_all',onClick="toggle(this,'sal')")
        th.text-center
          H4 E coli Serotyping
          input.checkbox-input(type="checkbox",name='typing_check_all',onClick="toggle(this,'ecoli')")
        th.text-center
          H4 Strep Serotyping
          input.checkbox-input(type="checkbox",name='typing_check_all',onClick="toggle(this,'strep')")
        th.text-center
          H4 AR Detection
          input.checkbox-input(type="checkbox",name='typing_check_all',onClick="toggle(this,'ar')",checked)
    tbody 
      form(action='/status/'+ run_id ,method='post',id='job')
        each isolate, i in isolates
          tr
            td.text-center
              =isolate.ISOID
            td.text-center(id='fastqc')
              if isolate.STATUSCODE[0] === '1'
                h5 Submitted
              else if isolate.STATUSCODE[0] === '2'
                h5 In Progress
              else if isolate.STATUSCODE[0] === '3'
                a(href= '/results/'+run_id+'/'+ isolate.FASTQC1)
                  button.btn.btn-light(type="button") Read 1
                a(href= '/results/'+run_id+'/'+ isolate.FASTQC2)
                  button.btn.btn-light(type="button") Read 2
              else
                div.checkbox
                  input.checkbox-input(type="checkbox",id='fastqc',name='fastqc_check_'+ isolate.ISOID,)
            td.text-center
              if isolate.STATUSCODE[1] === '1'
                h5 Submitted
              else if isolate.STATUSCODE[1] === '2'
                h5 In Progress
              else if isolate.STATUSCODE[1] === '3'
                a(href=isolate.KRAKEN)
                  button.btn.btn-light(type="button") Results
              else
                div.checkbox
                  input.checkbox-input(type="checkbox",id='kraken',name='kraken_check_'+ isolate.ISOID,)
            td.text-center
              if isolate.STATUSCODE[2] === '1'
                h5 Submitted
              else if isolate.STATUSCODE[2] === '2'
                h5 In Progress
              else if isolate.STATUSCODE[2] === '3'
                p #{isolate.SALTYPE}
              else
                div.checkbox
                  input.checkbox-input(type="checkbox",id='sal',name='sal_check_'+ isolate.ISOID,)
            td.text-center
              if isolate.STATUSCODE[3] === '1'
                h5 Submitted
              else if isolate.STATUSCODE[3] === '2'
                h5 In Progress
              else if isolate.STATUSCODE[3] === '3'
                p #{isolate.ECOLITYPE}
              else
                div.checkbox
                  input.checkbox-input(type="checkbox",id='ecoli',name='ecoli_check_'+ isolate.ISOID,)
            td.text-center
              if isolate.STATUSCODE[4] === '1'
                h5 Submitted
              else if isolate.STATUSCODE[4] === '2'
                h5 In Progress
              else if isolate.STATUSCODE[4] === '3'
                p #{isolate.STREPTYPE}
              else
                div.checkbox
                  input.checkbox-input(type="checkbox",id='strep',name='strep_check_'+ isolate.ISOID,)
            td.text-center
              if isolate.STATUSCODE[5] === '1'
                h5 Submitted
              else if isolate.STATUSCODE[5] === '2'
                h5 In Progress
              else if isolate.STATUSCODE[5] === '3'
                a(href= '#') 
                  button.btn.btn-light(type="button") Results
              else
                div.checkbox
                  input.checkbox-input(type="checkbox",id='ar',name='ar_check_'+ isolate.ISOID,checked)
            td 
              a(href='/status/'+ run_id+'/delete/'+isolate.ISOID)
                button.btn.btn-danger(type="button") Delete
